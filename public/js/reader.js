$(document).ready((function(){filter_search()}));const filter_search=function(){$(".card-search").on("input",(function(){let e=$(this).val().toLowerCase();$(".item .filter").filter((function(){$(this).closest(".item").toggle($(this).text().toLowerCase().indexOf(e)>-1)}))}))};function escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}const plural=e=>e?"s":"",__=e=>"undefined"!=typeof lang_messages&&lang_messages[e]||e,timePassed=function(e,t=!1){let n=(new Date).getTime()-new Date(e).getTime();return n<0?"In the future":(n=parseInt(n/1e3),n<60?n+(t?__(" second"+plural(1!==n)+" ago"):" s"):(n=parseInt(n/60),n<60?n+(t?__(" minute"+plural(1!==n)+" ago"):" m"):(n=parseInt(n/60),n<24?n+(t?__(" hour"+plural(1!==n)+" ago"):" h"):(n=parseInt(n/24),n<30?n+(t?__(" day"+plural(1!==n)+" ago"):" d"):(n=parseInt(n/30),n<12?n+(t?__(" month"+plural(1!==n)+" ago"):" mo"):(n=parseInt(n/12),n+(t?__(" year"+plural(1!==n)+" ago"):" y")))))))};window.timePassed=timePassed,$(document).ready((function(){let e=$("#nav-search"),t=$("#results-box");e.on("input",(function(){t.hide(),t.html(),$(this).val().length<3||$.ajax({type:"GET",url:API_BASE_URL+"/search/"+encodeURI($(this).val()),beforeSend:function(){e.css("background",'url("../img/loading.gif") 85% 7px /24px no-repeat rgb(255, 255, 255)')},success:function(e){let n="<ul>";0===e.comics.length?n+="<li><div>No results</div></li>":e.comics.forEach((function(e){n+='<li class="border-bottom hoverable"><a href="'+escapeHtml(e.url)+'" class="row no-gutters""><div class="col-auto"><span class="thumbnail-micro" style="background-image: url('+escapeHtml(e.thumbnail)+')"></div><div class="col pl-2">'+escapeHtml(e.title)+"</div></a></li>"})),n+="</ul>",t.html(n)},error:function(){t.html("<ul><li><div>No results</div></li></ul>")},complete:function(){e.css("background",""),t.show()}})})),e.focusout((function(){t.fadeOut()}))}));let timeout=0,allowed=!0;var canChange=!0;function setCookie(e,t,n){let r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);let i="expires="+r.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"}function getCookie(e){let t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let r=n[e];for(;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}$(document).ready((function(){$("body").keydown((function(e){if(!allowed)return;allowed=!1;let t=document.getElementById("turn-left"),n=document.getElementById("turn-right");37===e.which&&t?t.click():39===e.which&&n&&n.click(),timeout=setTimeout((function(){allowed=!0}),35)})),$(document).bind("scroll",(function(e){let t=$("body").hasClass("hide-header")?0:3.5*Number(getComputedStyle(document.body,"").fontSize.match(/(\d*(\.\d*)?)px/)[1]);$(".reader-image-wrapper[rendering=long-strip]").each((function(){$(this).offset().top<window.pageYOffset+t+10&&$(this).offset().top+$(this).height()>window.pageYOffset+t&&window.location.hash!=="#"+$(this).attr("data-page")&&canChange&&(window.location.hash=$(this).attr("data-page"))}))}))})),$((function(){$("#dark-mode-switch").on("change",(function(){setCookie("dark",parseInt(getCookie("dark"))?0:1,3650);const e=$("body");e.toggleClass("dark"),e.hasClass("dark")?e.attr("data-bs-theme","dark"):e.attr("data-bs-theme","light")}))})),function(e){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}((function(e){"use strict";function t(t){return!t||void 0!==t.allowPageScroll||void 0===t.swipe&&void 0===t.swipeStatus||(t.allowPageScroll=s),void 0!==t.click&&void 0===t.tap&&(t.tap=t.click),t||(t={}),t=e.extend({},e.fn.swipe.defaults,t),this.each((function(){var r=e(this),i=r.data(P);i||(i=new n(this,t),r.data(P,i))}))}function n(t,n){function _(t){if(!(!0===Ee.data(P+"_intouch")||e(t.target).closest(n.excludedElements,Ee).length>0)){var a=t.originalEvent?t.originalEvent:t;if(!a.pointerType||"mouse"!=a.pointerType||0!=n.fallbackToMouseEvents){var u,s=a.touches,c=s?s[0]:a;return xe=y,s?Se=s.length:!1!==n.preventDefaultEvents&&t.preventDefault(),fe=0,he=null,de=null,ye=null,ge=0,we=0,ve=0,me=1,Te=0,(p={})[r]=te(r),p[i]=te(i),p[o]=te(o),p[l]=te(l),be=p,z(),J(0,c),!s||Se===n.fingers||n.fingers===m||q()?(ke=oe(),2==Se&&(J(1,s[1]),we=ve=re(Oe[0].start,Oe[1].start)),(n.swipeStatus||n.pinchStatus)&&(u=R(a,xe))):u=!1,!1===u?(R(a,xe=x),u):(n.hold&&(Ie=setTimeout(e.proxy((function(){Ee.trigger("hold",[a.target]),n.hold&&(u=n.hold.call(Ee,a,a.target))}),this),n.longTapThreshold)),Z(!0),null)}}var p}function $(t){var p,f,h=t.originalEvent?t.originalEvent:t;if(xe!==E&&xe!==x&&!G()){var d,g=h.touches,T=K(g?g[0]:h);if(Pe=oe(),g&&(Se=g.length),n.hold&&clearTimeout(Ie),xe=b,2==Se&&(0==we?(J(1,g[1]),we=ve=re(Oe[0].start,Oe[1].start)):(K(g[1]),ve=re(Oe[0].end,Oe[1].end),Oe[0].end,Oe[1].end,ye=1>me?u:a),me=(ve/we*1).toFixed(2),Te=Math.abs(we-ve)),Se===n.fingers||n.fingers===m||!g||q()){if(he=ie(T.start,T.end),function(e,t){if(!1!==n.preventDefaultEvents)if(n.allowPageScroll===s)e.preventDefault();else{var a=n.allowPageScroll===c;switch(t){case r:(n.swipeLeft&&a||!a&&n.allowPageScroll!=w)&&e.preventDefault();break;case i:(n.swipeRight&&a||!a&&n.allowPageScroll!=w)&&e.preventDefault();break;case o:(n.swipeUp&&a||!a&&n.allowPageScroll!=v)&&e.preventDefault();break;case l:(n.swipeDown&&a||!a&&n.allowPageScroll!=v)&&e.preventDefault()}}}(t,de=ie(T.last,T.end)),p=T.start,f=T.end,fe=Math.round(Math.sqrt(Math.pow(f.x-p.x,2)+Math.pow(f.y-p.y,2))),ge=ne(),function(e,t){e!=s&&(t=Math.max(t,ee(e)),be[e].distance=t)}(he,fe),d=R(h,xe),!n.triggerOnTouchEnd||n.triggerOnTouchLeave){var y=!0;if(n.triggerOnTouchLeave){var S=function(t){var n=(t=e(t)).offset(),r={left:n.left,right:n.left+t.outerWidth(),top:n.top,bottom:n.top+t.outerHeight()};return r}(this);y=function(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom}(T.end,S)}!n.triggerOnTouchEnd&&y?xe=C(b):n.triggerOnTouchLeave&&!y&&(xe=C(E)),xe!=x&&xe!=E||R(h,xe)}}else R(h,xe=x);!1===d&&R(h,xe=x)}}function D(e){var t=e.originalEvent?e.originalEvent:e,r=t.touches;if(r){if(r.length&&!G())return function(e){_e=oe(),$e=e.touches.length+1}(t),!0;if(r.length&&G())return!0}return G()&&(Se=$e),Pe=oe(),ge=ne(),N()||!U()?R(t,xe=x):n.triggerOnTouchEnd||!1===n.triggerOnTouchEnd&&xe===b?(!1!==n.preventDefaultEvents&&!1!==e.cancelable&&e.preventDefault(),R(t,xe=E)):!n.triggerOnTouchEnd&&B()?A(t,xe=E,h):xe===b&&R(t,xe=x),Z(!1),null}function M(){Se=0,Pe=0,ke=0,we=0,ve=0,me=1,z(),Z(!1)}function I(e){var t=e.originalEvent?e.originalEvent:e;n.triggerOnTouchLeave&&R(t,xe=C(E))}function L(){Ee.off(ae,_),Ee.off(pe,M),Ee.off(ue,$),Ee.off(se,D),ce&&Ee.off(ce,I),Z(!1)}function C(e){var t=e,r=H(),i=U(),o=N();return!r||o?t=x:!i||e!=b||n.triggerOnTouchEnd&&!n.triggerOnTouchLeave?!i&&e==E&&n.triggerOnTouchLeave&&(t=x):t=E,t}function R(e,t){var r,i=e.touches;return(!(!Y()||!Q())||Q())&&(r=A(e,t,p)),(!(!j()||!q())||q())&&!1!==r&&(r=A(e,t,f)),W()&&V()&&!1!==r?r=A(e,t,d):ge>n.longTapThreshold&&T>fe&&n.longTap&&!1!==r?r=A(e,t,g):!(1!==Se&&S||!(isNaN(fe)||fe<n.threshold)||!B())&&!1!==r&&(r=A(e,t,h)),t===x&&M(),t===E&&(i&&i.length||M()),r}function A(t,s,c){var w;if(c==p){if(Ee.trigger("swipeStatus",[s,he||null,fe||0,ge||0,Se,Oe,de]),n.swipeStatus&&!1===(w=n.swipeStatus.call(Ee,t,s,he||null,fe||0,ge||0,Se,Oe,de)))return!1;if(s==E&&Y()){if(clearTimeout(Me),clearTimeout(Ie),Ee.trigger("swipe",[he,fe,ge,Se,Oe,de]),n.swipe&&!1===(w=n.swipe.call(Ee,t,he,fe,ge,Se,Oe,de)))return!1;switch(he){case r:Ee.trigger("swipeLeft",[he,fe,ge,Se,Oe,de]),n.swipeLeft&&(w=n.swipeLeft.call(Ee,t,he,fe,ge,Se,Oe,de));break;case i:Ee.trigger("swipeRight",[he,fe,ge,Se,Oe,de]),n.swipeRight&&(w=n.swipeRight.call(Ee,t,he,fe,ge,Se,Oe,de));break;case o:Ee.trigger("swipeUp",[he,fe,ge,Se,Oe,de]),n.swipeUp&&(w=n.swipeUp.call(Ee,t,he,fe,ge,Se,Oe,de));break;case l:Ee.trigger("swipeDown",[he,fe,ge,Se,Oe,de]),n.swipeDown&&(w=n.swipeDown.call(Ee,t,he,fe,ge,Se,Oe,de))}}}if(c==f){if(Ee.trigger("pinchStatus",[s,ye||null,Te||0,ge||0,Se,me,Oe]),n.pinchStatus&&!1===(w=n.pinchStatus.call(Ee,t,s,ye||null,Te||0,ge||0,Se,me,Oe)))return!1;if(s==E&&j())switch(ye){case a:Ee.trigger("pinchIn",[ye||null,Te||0,ge||0,Se,me,Oe]),n.pinchIn&&(w=n.pinchIn.call(Ee,t,ye||null,Te||0,ge||0,Se,me,Oe));break;case u:Ee.trigger("pinchOut",[ye||null,Te||0,ge||0,Se,me,Oe]),n.pinchOut&&(w=n.pinchOut.call(Ee,t,ye||null,Te||0,ge||0,Se,me,Oe))}}return c==h?s!==x&&s!==E||(clearTimeout(Me),clearTimeout(Ie),V()&&!W()?(De=oe(),Me=setTimeout(e.proxy((function(){De=null,Ee.trigger("tap",[t.target]),n.tap&&(w=n.tap.call(Ee,t,t.target))}),this),n.doubleTapThreshold)):(De=null,Ee.trigger("tap",[t.target]),n.tap&&(w=n.tap.call(Ee,t,t.target)))):c==d?s!==x&&s!==E||(clearTimeout(Me),clearTimeout(Ie),De=null,Ee.trigger("doubletap",[t.target]),n.doubleTap&&(w=n.doubleTap.call(Ee,t,t.target))):c==g&&(s!==x&&s!==E||(clearTimeout(Me),De=null,Ee.trigger("longtap",[t.target]),n.longTap&&(w=n.longTap.call(Ee,t,t.target)))),w}function U(){var e=!0;return null!==n.threshold&&(e=fe>=n.threshold),e}function N(){var e=!1;return null!==n.cancelThreshold&&null!==he&&(e=ee(he)-fe>=n.cancelThreshold),e}function H(){return!n.maxTimeThreshold||!(ge>=n.maxTimeThreshold)}function j(){var e=F(),t=X(),r=null===n.pinchThreshold||Te>=n.pinchThreshold;return e&&t&&r}function q(){return!!(n.pinchStatus||n.pinchIn||n.pinchOut)}function Y(){var e=H(),t=U(),n=F(),r=X();return!N()&&r&&n&&t&&e}function Q(){return!!(n.swipe||n.swipeStatus||n.swipeLeft||n.swipeRight||n.swipeUp||n.swipeDown)}function F(){return Se===n.fingers||n.fingers===m||!S}function X(){return 0!==Oe[0].end.x}function B(){return!!n.tap}function V(){return!!n.doubleTap}function W(){if(null==De)return!1;var e=oe();return V()&&e-De<=n.doubleTapThreshold}function z(){_e=0,$e=0}function G(){var e=!1;_e&&(oe()-_e<=n.fingerReleaseThreshold&&(e=!0));return e}function Z(e){Ee&&(!0===e?(Ee.on(ue,$),Ee.on(se,D),ce&&Ee.on(ce,I)):(Ee.off(ue,$,!1),Ee.off(se,D,!1),ce&&Ee.off(ce,I,!1)),Ee.data(P+"_intouch",!0===e))}function J(e,t){var n={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return n.start.x=n.last.x=n.end.x=t.pageX||t.clientX,n.start.y=n.last.y=n.end.y=t.pageY||t.clientY,Oe[e]=n,n}function K(e){var t=void 0!==e.identifier?e.identifier:0,n=function(e){return Oe[e]||null}(t);return null===n&&(n=J(t,e)),n.last.x=n.end.x,n.last.y=n.end.y,n.end.x=e.pageX||e.clientX,n.end.y=e.pageY||e.clientY,n}function ee(e){return be[e]?be[e].distance:void 0}function te(e){return{direction:e,distance:0}}function ne(){return Pe-ke}function re(e,t){var n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return Math.round(Math.sqrt(n*n+r*r))}function ie(e,t){if(a=t,(n=e).x==a.x&&n.y==a.y)return s;var n,a,u=function(e,t){var n=e.x-t.x,r=t.y-e.y,i=Math.atan2(r,n),o=Math.round(180*i/Math.PI);return 0>o&&(o=360-Math.abs(o)),o}(e,t);return 45>=u&&u>=0||360>=u&&u>=315?r:u>=135&&225>=u?i:u>45&&135>u?l:o}function oe(){return(new Date).getTime()}n=e.extend({},n);var le=S||k||!n.fallbackToMouseEvents,ae=le?k?O?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ue=le?k?O?"MSPointerMove":"pointermove":"touchmove":"mousemove",se=le?k?O?"MSPointerUp":"pointerup":"touchend":"mouseup",ce=le?k?"mouseleave":null:"mouseleave",pe=k?O?"MSPointerCancel":"pointercancel":"touchcancel",fe=0,he=null,de=null,ge=0,we=0,ve=0,me=1,Te=0,ye=0,be=null,Ee=e(t),xe="start",Se=0,Oe={},ke=0,Pe=0,_e=0,$e=0,De=0,Me=null,Ie=null;try{Ee.on(ae,_),Ee.on(pe,M)}catch(t){e.error("events not supported "+ae+","+pe+" on jQuery.swipe")}this.enable=function(){return this.disable(),Ee.on(ae,_),Ee.on(pe,M),Ee},this.disable=function(){return L(),Ee},this.destroy=function(){L(),Ee.data(P,null),Ee=null},this.option=function(t,r){if("object"==typeof t)n=e.extend(n,t);else if(void 0!==n[t]){if(void 0===r)return n[t];n[t]=r}else{if(!t)return n;e.error("Option "+t+" does not exist on jQuery.swipe.options")}return null}}var r="left",i="right",o="up",l="down",a="in",u="out",s="none",c="auto",p="swipe",f="pinch",h="tap",d="doubletap",g="longtap",w="horizontal",v="vertical",m="all",T=10,y="start",b="move",E="end",x="cancel",S="ontouchstart"in window,O=window.navigator.msPointerEnabled&&!window.PointerEvent&&!S,k=(window.PointerEvent||window.navigator.msPointerEnabled)&&!S,P="TouchSwipe";e.fn.swipe=function(n){var r=e(this),i=r.data(P);if(i&&"string"==typeof n){if(i[n])return i[n].apply(i,Array.prototype.slice.call(arguments,1));e.error("Method "+n+" does not exist on jQuery.swipe")}else if(i&&"object"==typeof n)i.option.apply(i,arguments);else if(!(i||"object"!=typeof n&&n))return t.apply(this,arguments);return r},e.fn.swipe.version="1.6.18",e.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0},e.fn.swipe.phases={PHASE_START:y,PHASE_MOVE:b,PHASE_END:E,PHASE_CANCEL:x},e.fn.swipe.directions={LEFT:r,RIGHT:i,UP:o,DOWN:l,IN:a,OUT:u},e.fn.swipe.pageScroll={NONE:s,HORIZONTAL:w,VERTICAL:v,AUTO:c},e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:m}}));
